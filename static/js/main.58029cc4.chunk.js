(this["webpackJsonpchart-app"]=this["webpackJsonpchart-app"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t),function(e){var t=n(1);function a(e,t){var n=e.x1,a=e.y1,i=e.x2,r=e.y2;t.beginPath(),t.setLineDash([]),t.moveTo(n,a),t.lineTo(i,r),t.lineWidth=2,t.strokeStyle="#2B2B2B",t.stroke()}function i(e,t){e.putImageData(t,0,0)}function r(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function o(e,t,n,a,i,r){!0===r&&(e.beginPath(),e.moveTo(t,n),e.lineTo(a,n),e.moveTo(t,n),e.lineTo(t,0),e.moveTo(t,n),e.lineTo(t,i),e.moveTo(t,n),e.lineTo(0,n),e.strokeStyle="#FFFFFF",e.lineWidth=.8,e.setLineDash([5]),e.stroke())}e.exports={drawGrid:function(e,n,c,s,l,h){var u,d,f,v=n.width,p=n.height,g=l,y=h||0;console.log("starting pad",y);var x=[];if("line"===g)c.clearRect(0,0,v,p),d=Math.max.apply(Math,Object(t.a)(e))+y,u=Math.min.apply(Math,Object(t.a)(e))-y;else{c.clearRect(0,0,v,p);var b=e.map((function(e){return e.high})),m=e.map((function(e){return e.low}));d=Math.max.apply(Math,Object(t.a)(b))+y,u=Math.min.apply(Math,Object(t.a)(m))-y}console.log("min/max",u,d),v-=80;var j=(f=d-u)+2*y,k=j/10;console.log("totalH",j);for(var O=v/20,S=p/10,T=O,w=S,C=1;C<22&&(a({x1:O,y1:0,x2:O,y2:p},c),!((O+=T)>v));C++);var D=d+y;D-=k;for(var R=1;R<10;R++)a({x1:0,y1:S,x2:v,y2:S},c),c.beginPath(),c.font="12px Arial",c.fillStyle="white",c.textAlign="left",c.fillText("".concat(D.toFixed(2)),v+5,S),S+=w,D-=k;var L,P={max:d,min:u,diff:f,width:v,height:p,spaceX:T,spaceY:w};"line"===g?function(e,n,a,i){var r=n.max,o=n.min,c=n.diff,s=n.width,l=n.height,h=n.spaceX,u=n.spaceY;console.log(r,o,c,s,l,h,u);var d=function(e){return(e-o)/c*l},f=e.length,v=e[f-1],p=0;a.beginPath(),a.lineWidth=2,a.lineCap="square",a.lineJoin="round",a.setLineDash([]),a.moveTo(p,500-d(v)),p+=h;var g=Object(t.a)(e);console.log(g.splice(f-1,1)),g.reverse().map((function(e){a.lineTo(p,500-d(e)),i.push({x:p,y:500-d(e)}),a.strokeStyle="rgba(255, 255, 255, 1)",a.stroke(),p+=h}))}(e,P,c,x):"candlestick"===g?function(e,n,a,i){var r=n.min,o=n.diff,c=n.height,s=n.spaceX,l=function(e){return(e-r)/o*c},h=0;Object(t.a)(e).reverse().map((function(e){a.beginPath(),a.setLineDash([]);var t=e.high,n=e.low,r=e.open,o=e.close;return a.moveTo(h,500-l(t)),a.lineTo(h,500-l(n)),o>r?a.strokeStyle="#519C58":o<r&&(a.strokeStyle="#E3415D"),a.lineWidth=2,a.stroke(),a.beginPath(),a.setLineDash([]),o>r?(a.strokeStyle="#519C58",a.fillStyle="#519C58",a.fillRect(h-5,500-l(o),10,l(o)-l(r))):o<r&&(a.strokeStyle="#E3415D",a.fillStyle="#E3415D",a.fillRect(h-5,500-l(r),10,l(r)-l(o))),i.push({x:h,y1:500-l(t),y2:500-l(n),y3:500-l(r),y4:500-l(o)}),a.stroke(),h+=s,null}))}(e,P,c,x):"barchart"===g?function(e,n,a,i){var r=n.min,o=n.diff,c=n.height,s=n.spaceX,l=function(e){return(e-r)/o*c},h=0;Object(t.a)(e).reverse().map((function(e){a.beginPath(),a.setLineDash([]);var t=e.high,n=e.low,i=e.open,r=e.close;return a.moveTo(h,500-l(t)),a.lineTo(h,500-l(n)),r>i?a.strokeStyle="#519C58":r<i&&(a.strokeStyle="#E3415D"),a.lineWidth=2,a.stroke(),a.beginPath(),a.setLineDash([]),r>i?(a.strokeStyle="#519C58",a.moveTo(h,500-l(r)),a.lineTo(h+8,500-l(r)),a.stroke(),a.moveTo(h,500-l(i)),a.lineTo(h-8,500-l(i)),a.stroke()):r<i&&(a.strokeStyle="#E3415D",a.moveTo(h,500-l(i)),a.lineTo(h-8,500-l(i)),a.stroke(),a.moveTo(h,500-l(r)),a.lineTo(h+8,500-l(r)),a.stroke()),h+=s,null}))}(e,P,c):"heikenashi"===g&&function(e,n,a,i){var r,o,c,s,l,h,u=n.min,d=n.diff,f=n.height,v=n.spaceX,p=function(e){return(e-u)/d*f},g=0,y=Object(t.a)(e),x=!0;y.reverse().map((function(e){a.beginPath(),a.setLineDash([]);var t=e.high,n=e.low,i=e.open,u=e.close;return x?(s=(i+t+u+n)/4,c=(i+u)/2,a.moveTo(g,500-p(t)),a.lineTo(g,500-p(n)),console.log("first candle",s,c)):(s=(i+t+u+n)/4,c=(r+o)/2,l=Math.max(t,i,u),h=Math.min(n,i,u),a.moveTo(g,500-p(l)),a.lineTo(g,500-p(h))),s>c?a.strokeStyle="#519C58":s<c&&(a.strokeStyle="#E3415D"),a.lineWidth=2,a.stroke(),a.beginPath(),a.setLineDash([]),s>c?(a.strokeStyle="#519C58",a.fillStyle="#519C58",a.fillRect(g-5,500-p(s),10,p(s)-p(c))):s<c&&(a.strokeStyle="#E3415D",a.fillStyle="#E3415D",a.fillRect(g-5,500-p(c),10,p(c)-p(s))),r=c,o=s,a.stroke(),g+=v,x=!1,null}))}(e,P,c),L=function(e,t){return t.getImageData(0,0,e.width,e.height)}(s,c);var E=!0;s.addEventListener("mousemove",(function(e){var t=r(s,e).x;E=!(t>v)})),s.addEventListener("mousedown",(function(e){var t=s.getContext("2d"),n=r(s,e),a=n.x,c=n.y;i(t,L),o(t,a,c,v,p,E)})),s.addEventListener("mousemove",(function(e){var t=s.getContext("2d"),n=r(s,e),a=n.x,c=n.y;i(t,L),o(t,a,c,v,p,E),"line"===g&&x.map((function(e){return e.x>=a-12&&e.x<=a+12&&e.y>=c-12&&e.y<=c+12&&(i(t,L),t.beginPath(),t.setLineDash([]),t.lineWidth=1.6,t.fillStyle="#FF0000",t.arc(e.x,e.y,4,0,2*Math.PI),t.fill(),t.stroke()),null}))}))},drawLine:a,gradChange:function(e,t){return e.deltaY<0?(console.log("wheeling up"),t<=0?0:t-5):e.deltaY>0?(console.log("wheeling down"),t+5):void 0}}}.call(this,n(20)(e))},21:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(4),r=n(5),o=n(7),c=n(6),s=n(2),l=n.n(s),h=n(11),u=n.n(h),d=n(10),f=n(3),v=n.n(f),p=n(9),g=(n(18),n(19)),y=g.drawGrid,x=g.gradChange,b=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).canvasRef=l.a.createRef(),e.contextRef=l.a.createRef(),e.selectChart=function(){var t=Object(p.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({chartType:n.target.value}),"line"!==n.target.value){t.next=6;break}return t.next=4,fetch("https://api.jsonbin.io/b/6004dadff98f6e35d5fdca2a").then((function(e){return e.json()})).then((function(t){var n=t;n.length=10;var a=n.map((function(e){return e.close}));e.setState({data:a},(function(){e.renderGrid(e.state.context,e.state.canvasStyle)}))}));case 4:t.next=10;break;case 6:return n.target.value,e.setState({chartType:n.target.value}),t.next=10,fetch("https://api.jsonbin.io/b/6004dadff98f6e35d5fdca2a").then((function(e){return e.json()})).then((function(t){var n=t;n.length=10,e.setState({data:n},(function(){e.renderGrid(e.state.context,e.state.canvasStyle)}))}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderGrid=function(t){var n=t.getBoundingClientRect(),a=n.width,i=n.height,r=window.devicePixelRatio;t.width=a*r,t.height=i*r;var o=t.getContext("2d");o.scale(r,r),t.style.width=a+"px",t.style.height=i+"px",y(e.state.data,{width:a,height:i},o,t,e.state.chartType,e.state.padY),e.setState({grid:!0})},e.componentDidMount=Object(p.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState((function(t){return{canvasStyle:Object(d.a)(Object(d.a)({},t.canvasStyle),{},{width:"".concat(e.canvasRef.current.clientWidth,"px"),height:"".concat(e.canvasRef.current.clientHeight,"px")}),context:e.contextRef.current}})),t.next=3,fetch("https://api.jsonbin.io/b/6004dadff98f6e35d5fdca2a").then((function(e){return e.json()})).then((function(t){var n=t;n.length=10;var a=n.map((function(e){return e.close}));e.setState({data:a},(function(){e.renderGrid(e.state.context,e.state.canvasStyle)}))}));case 3:case"end":return t.stop()}}),t)}))),e.state={canvasStyle:{width:"",height:""},context:"",data:[],padY:10,grid:!1,chartType:"line"},e}return Object(r.a)(n,[{key:"gradResize",value:function(e){var t=this,n=this.state.context,a=x(e,this.state.padY);console.log(a);var i=n.getBoundingClientRect(),r=i.width,o=i.height,c=n.getContext("2d");this.setState({padY:a},(function(){y(t.state.data,{width:r,height:o},c,n,t.state.chartType,t.state.padY)}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"chart-type",children:[Object(a.jsx)("input",{onClick:function(t){return e.selectChart(t)},type:"radio",id:"chart1",name:"chart",value:"line"}),Object(a.jsx)("label",{children:" Line Chart"}),Object(a.jsx)("input",{onClick:function(t){return e.selectChart(t)},type:"radio",id:"chart2",name:"chart",value:"candlestick"}),Object(a.jsx)("label",{children:" Candlestick"}),Object(a.jsx)("input",{onClick:function(t){return e.selectChart(t)},type:"radio",id:"chart3",name:"chart",value:"barchart"}),Object(a.jsx)("label",{children:" Bar"}),Object(a.jsx)("input",{onClick:function(t){return e.selectChart(t)},type:"radio",id:"chart4",name:"chart",value:"heikenashi"}),Object(a.jsx)("label",{children:" Heiken Ashi"})]}),Object(a.jsx)("div",{ref:this.canvasRef,id:"canvas-main",children:Object(a.jsx)("div",{id:"canvas-child",children:Object(a.jsx)("canvas",{onWheel:function(t){return e.gradResize(t)},ref:this.contextRef,style:this.state.canvasStyle,children:" "})})})]})}}]),n}(l.a.Component),m=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(b,{})})}}]),n}(s.Component);u.a.render(Object(a.jsx)(m,{}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.58029cc4.chunk.js.map